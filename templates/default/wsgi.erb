"""
Generated by Chef for <%= node['fqdn'] %>.
Local modifications will be overwritten.
"""

import os

os.environ.setdefault("DJANGO_SETTINGS_MODULE", "<%= @config['settings_module'] %>")

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandler()

<% if @config["sentry_dsn"] %>
try:
    from raven import Client
    try:
        from raven.contrib.django.raven_compat.middleware.wsgi import Sentry
    except ImportError:
        from raven.middleware import Sentry
except ImportError:
    Client = Sentry = None

if Client:
    # Low lever error handling
    try:
        application = Sentry(application, Client('<%= @config["sentry_dsn"] %>'))
    except Exception:
        application = Sentry(application)
<% end %>
