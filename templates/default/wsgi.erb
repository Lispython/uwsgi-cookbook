"""
Generated by Chef for <%= node['fqdn'] %>.
Local modifications will be overwritten.
"""

import os
import sys
import site
<% if @sentry_dsn %>
try:
    from raven import Client
    from raven.middleware import Sentry
except ImportError:
    Client = Sentry = None
<% end %>

PROJECT_ROOT = os.path.normpath("<%= @project_root %>")

def rel(*parts):
    return os.path.join(PROJECT_ROOT, *parts)

sys.path.insert(0, os.path.abspath(os.path.join(os.path.dirname(__file__), "../")))

site.addsitedir(rel('<%= @current %>','venv', 'lib', '<%= @python_version %>', 'site-packages'))
sys.path.append('<%= @current %>')
os.environ['DJANGO_SETTINGS_MODULE'] = 'current.settings'

import django.core.handlers.wsgi

application = django.core.handlers.wsgi.WSGIHandler()

<% if @sentry_dsn %>
if Client:
    # Low lever error handling
    application = Sentry(application, Client('<%= @sentry_dsn %>'))
<% end %>
